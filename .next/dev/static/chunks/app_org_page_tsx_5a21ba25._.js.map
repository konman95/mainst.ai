{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/app/org/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { api } from \"../../lib/api\";\n\nexport default function OrgAnalytics() {\n  const [summary, setSummary] = useState<any>(null);\n  const [weekly, setWeekly] = useState<any>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n    const load = async () => {\n      try {\n        const [daySummary, weekSummary] = await Promise.all([\n          api.orgSummary(),\n          api.orgWeeklySummary()\n        ]);\n        if (active) {\n          setSummary(daySummary);\n          setWeekly(weekSummary);\n        }\n      } catch (e: any) {\n        if (active) setError(e?.message || String(e));\n      }\n    };\n    load();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const totals = summary?.totals || {};\n  const weeklyTotals = weekly?.totals || {};\n\n  return (\n    <div className=\"stagger\">\n      <div className=\"row\" style={{ alignItems: \"center\", justifyContent: \"space-between\" }}>\n        <div>\n          <span className=\"pill\">Org Analytics</span>\n          <h2 className=\"section-title\">Cross-workspace intelligence</h2>\n        </div>\n        <a className=\"btn primary\" href=\"/dashboard\">Back to Dashboard</a>\n      </div>\n\n      {error && <div className=\"muted\">Error: {error}</div>}\n\n      <div className=\"stat-grid\">\n        <div className=\"stat\">\n          <div className=\"stat-value\">{totals.chat_messages || 0}</div>\n          <div className=\"muted\">Messages today</div>\n        </div>\n        <div className=\"stat\">\n          <div className=\"stat-value\">{totals.decisions_made || 0}</div>\n          <div className=\"muted\">Decisions today</div>\n        </div>\n        <div className=\"stat\">\n          <div className=\"stat-value\">{totals.autosent || 0}</div>\n          <div className=\"muted\">Auto-sent today</div>\n        </div>\n        <div className=\"stat\">\n          <div className=\"stat-value\">{totals.minutes_saved || 0}</div>\n          <div className=\"muted\">Minutes saved today</div>\n        </div>\n        <div className=\"stat\">\n          <div className=\"stat-value\">{weeklyTotals.minutes_saved || 0}</div>\n          <div className=\"muted\">Minutes saved (7d)</div>\n        </div>\n        <div className=\"stat\">\n          <div className=\"stat-value\">{summary?.workspaces?.length || 0}</div>\n          <div className=\"muted\">Active workspaces</div>\n        </div>\n      </div>\n\n      <div className=\"card\">\n        <h3 className=\"section-title\">Workspace breakdown</h3>\n        {summary?.workspaces?.length ? (\n          <div className=\"table\" style={{ marginTop: 12 }}>\n            <div className=\"table-row table-header\">\n              <span>Workspace</span>\n              <span>Messages</span>\n              <span>Decisions</span>\n              <span>Minutes saved</span>\n            </div>\n            {summary.workspaces.map((ws: any) => (\n              <div className=\"table-row\" key={ws.id}>\n                <div>\n                  <strong>{ws.name}</strong>\n                  <div className=\"muted\">ID: {ws.id}</div>\n                </div>\n                <span className=\"muted\">{ws.stats?.chat_messages || 0}</span>\n                <span className=\"muted\">{ws.stats?.decisions_made || 0}</span>\n                <span className=\"muted\">{ws.stats?.minutes_saved || 0}</span>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"muted\">No workspace stats yet.</div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}