{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/auth.ts"],"sourcesContent":["const KEY = \"mainstai_auth\";\nexport function setAuth(a: { uid: string; token: string }) {\n  localStorage.setItem(KEY, JSON.stringify(a));\n}\nexport function getAuth(): { uid: string; token: string } | null {\n  if (typeof window === \"undefined\") return null;\n  const raw = localStorage.getItem(KEY);\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw);\n  } catch (e) {\n    localStorage.removeItem(KEY);\n    return null;\n  }\n}\nexport function clearAuth() {\n  localStorage.removeItem(KEY);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,MAAM;AACL,SAAS,QAAQ,CAAiC;IACvD,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAC3C;AACO,SAAS;IACd;;IACA,MAAM,MAAM,aAAa,OAAO,CAAC;IACjC,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,GAAG;QACV,aAAa,UAAU,CAAC;QACxB,OAAO;IACT;AACF;AACO,SAAS;IACd,aAAa,UAAU,CAAC;AAC1B"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/components/Nav.tsx"],"sourcesContent":["\"use client\";\nimport Link from \"next/link\";\nimport { clearAuth, getAuth } from \"../lib/auth\";\nimport { useEffect, useState } from \"react\";\nimport { usePathname } from \"next/navigation\";\n\nexport default function Nav() {\n  const pathname = usePathname();\n  const [auth, setAuth] = useState<{ uid: string; token: string } | null>(null);\n\n  // Read auth only on the client after mount to avoid SSR / hydration mismatch\n  useEffect(() => {\n    setAuth(getAuth());\n  }, []);\n\n  return (\n    <div className=\"nav\">\n      <div className=\"nav-inner\">\n        <div className=\"nav-brand\">\n          <span className=\"pill\">Main St AI</span>\n          <span className=\"muted\">Business OS</span>\n        </div>\n        <div className=\"nav-links\">\n          <Link className={`nav-link ${pathname === \"/dashboard\" ? \"active\" : \"\"}`} href=\"/dashboard\">\n            Dashboard\n          </Link>\n          <Link className={`nav-link ${pathname === \"/profile\" ? \"active\" : \"\"}`} href=\"/profile\">\n            Profile\n          </Link>\n          <Link className={`nav-link ${pathname === \"/contacts\" ? \"active\" : \"\"}`} href=\"/contacts\">\n            Contacts\n          </Link>\n          <Link className={`nav-link ${pathname === \"/chat\" ? \"active\" : \"\"}`} href=\"/chat\">\n            Chat\n          </Link>\n          <Link className={`nav-link ${pathname === \"/owner-cover\" ? \"active\" : \"\"}`} href=\"/owner-cover\">\n            Owner Cover\n          </Link>\n          <Link className={`nav-link ${pathname === \"/decision-feed\" ? \"active\" : \"\"}`} href=\"/decision-feed\">\n            Decisions\n          </Link>\n          <Link className={`nav-link ${pathname === \"/action-queue\" ? \"active\" : \"\"}`} href=\"/action-queue\">\n            Action Queue\n          </Link>\n          <Link className={`nav-link ${pathname === \"/memory\" ? \"active\" : \"\"}`} href=\"/memory\">\n            Memory\n          </Link>\n          <Link className={`nav-link ${pathname === \"/outcomes\" ? \"active\" : \"\"}`} href=\"/outcomes\">\n            Outcomes\n          </Link>\n          <Link className={`nav-link ${pathname === \"/how-it-works\" ? \"active\" : \"\"}`} href=\"/how-it-works\">\n            How It Works\n          </Link>\n          {auth ? (\n            <button\n              className=\"btn ghost\"\n              onClick={() => {\n                clearAuth();\n                location.href = \"/login\";\n              }}\n            >\n              Logout\n            </button>\n          ) : (\n            <Link className={`nav-link ${pathname === \"/login\" ? \"active\" : \"\"}`} href=\"/login\">\n              Login\n            </Link>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAwC;IAExE,6EAA6E;IAC7E,IAAA,0KAAS;yBAAC;YACR,QAAQ,IAAA,yHAAO;QACjB;wBAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAK,WAAU;sCAAO;;;;;;sCACvB,6LAAC;4BAAK,WAAU;sCAAQ;;;;;;;;;;;;8BAE1B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,eAAe,WAAW,IAAI;4BAAE,MAAK;sCAAa;;;;;;sCAG5F,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,aAAa,WAAW,IAAI;4BAAE,MAAK;sCAAW;;;;;;sCAGxF,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,cAAc,WAAW,IAAI;4BAAE,MAAK;sCAAY;;;;;;sCAG1F,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,UAAU,WAAW,IAAI;4BAAE,MAAK;sCAAQ;;;;;;sCAGlF,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,iBAAiB,WAAW,IAAI;4BAAE,MAAK;sCAAe;;;;;;sCAGhG,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,mBAAmB,WAAW,IAAI;4BAAE,MAAK;sCAAiB;;;;;;sCAGpG,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,kBAAkB,WAAW,IAAI;4BAAE,MAAK;sCAAgB;;;;;;sCAGlG,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,YAAY,WAAW,IAAI;4BAAE,MAAK;sCAAU;;;;;;sCAGtF,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,cAAc,WAAW,IAAI;4BAAE,MAAK;sCAAY;;;;;;sCAG1F,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,kBAAkB,WAAW,IAAI;4BAAE,MAAK;sCAAgB;;;;;;wBAGjG,qBACC,6LAAC;4BACC,WAAU;4BACV,SAAS;gCACP,IAAA,2HAAS;gCACT,SAAS,IAAI,GAAG;4BAClB;sCACD;;;;;iDAID,6LAAC,0KAAI;4BAAC,WAAW,CAAC,SAAS,EAAE,aAAa,WAAW,WAAW,IAAI;4BAAE,MAAK;sCAAS;;;;;;;;;;;;;;;;;;;;;;;AAQhG;GAlEwB;;QACL,oJAAW;;;KADN"}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/components/DevToolbar.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\n\nexport default function DevToolbar() {\n  const [mock, setMock] = useState<boolean | null>(null);\n\n  useEffect(() => {\n    const v = localStorage.getItem(\"USE_MOCK\");\n    if (v === null) setMock(null);\n    else setMock(v === \"true\");\n  }, []);\n\n  function toggle() {\n    const next = !(mock === true);\n    localStorage.setItem(\"USE_MOCK\", next ? \"true\" : \"false\");\n    setMock(next);\n    // don't force reload; let components pick up change on next action\n    // but advise user to reload for deterministic behavior\n  }\n\n  function clear() {\n    localStorage.removeItem(\"USE_MOCK\");\n    setMock(null);\n  }\n\n  return (\n    <div className=\"devbar\">\n      <div className=\"devbar-inner\">\n        <strong>Dev</strong>\n        <button className=\"btn ghost\" onClick={toggle}>\n          {mock === null ? \"Mock: unset\" : mock ? \"Mock: ON\" : \"Mock: OFF\"}\n        </button>\n        <button className=\"btn ghost\" onClick={clear}>Clear</button>\n        <div style={{ marginLeft: \"auto\" }}>\n          Tip: toggle changes runtime mock flag stored in localStorage\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAGe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAiB;IAEjD,IAAA,0KAAS;gCAAC;YACR,MAAM,IAAI,aAAa,OAAO,CAAC;YAC/B,IAAI,MAAM,MAAM,QAAQ;iBACnB,QAAQ,MAAM;QACrB;+BAAG,EAAE;IAEL,SAAS;QACP,MAAM,OAAO,CAAC,CAAC,SAAS,IAAI;QAC5B,aAAa,OAAO,CAAC,YAAY,OAAO,SAAS;QACjD,QAAQ;IACR,mEAAmE;IACnE,uDAAuD;IACzD;IAEA,SAAS;QACP,aAAa,UAAU,CAAC;QACxB,QAAQ;IACV;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;8BAAO;;;;;;8BACR,6LAAC;oBAAO,WAAU;oBAAY,SAAS;8BACpC,SAAS,OAAO,gBAAgB,OAAO,aAAa;;;;;;8BAEvD,6LAAC;oBAAO,WAAU;oBAAY,SAAS;8BAAO;;;;;;8BAC9C,6LAAC;oBAAI,OAAO;wBAAE,YAAY;oBAAO;8BAAG;;;;;;;;;;;;;;;;;AAM5C;GApCwB;KAAA"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/api.ts"],"sourcesContent":["import { getAuth } from \"./auth\";\nconst BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL ||\n  (typeof window !== \"undefined\" ? \"/api\" : \"http://localhost:8000\");\nconst USE_MOCK = (process.env.NEXT_PUBLIC_USE_MOCK || \"false\") === \"true\";\n\nfunction isMockEnabled(): boolean {\n  if (typeof window !== \"undefined\") {\n    const runtime = localStorage.getItem(\"USE_MOCK\");\n    if (runtime === \"true\") return true;\n    if (runtime === \"false\") return false;\n  }\n  return USE_MOCK;\n}\n\nconst MOCK_PATHS = [\"/health\", \"/contacts\", \"/chat\", \"/ownercover\", \"/profile\"];\n\nfunction buildUrl(path: string) {\n  if (isMockEnabled() && MOCK_PATHS.some(p => path === p || path.startsWith(`${p}/`))) {\n    return `/api/mock${path}`;\n  }\n  return BASE + path;\n}\n\nasync function req(path: string, body?: any, method?: string) {\n  const auth = getAuth();\n  const devFallback =\n    typeof window !== \"undefined\" && !auth?.token ? \"dev-guest\" : undefined;\n  let res: Response;\n  try {\n    res = await fetch(buildUrl(path), {\n      method: method || (body ? \"POST\" : \"GET\"),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(auth?.token\n          ? { Authorization: `Bearer ${auth.token}` }\n          : devFallback\n            ? { Authorization: `Bearer ${devFallback}` }\n            : {})\n      },\n      body: body ? JSON.stringify(body) : undefined\n    });\n  } catch (e: any) {\n    throw new Error(\"Network error: \" + (e?.message || String(e)));\n  }\n\n  if (!res.ok) {\n    const text = await res.text().catch(() => `HTTP ${res.status}`);\n    throw new Error(text);\n  }\n\n  try {\n    return await res.json();\n  } catch (e) {\n    return null;\n  }\n}\n\nexport const api = {\n  health: () => req(\"/health\"),\n  chat: (b: any) => req(\"/chat\", b),\n  chatManual: (b: any) => req(\"/chat/manual\", b),\n  chatHistory: (conversationId: string) =>\n    req(`/chat/history?conversationId=${encodeURIComponent(conversationId)}`),\n  ownerGet: () => req(\"/ownercover/settings\"),\n  ownerSet: (b: any) => req(\"/ownercover/settings\", b),\n  ownerInbound: (b: any) => req(\"/ownercover/handleInbound\", b),\n  profileGet: () => req(\"/profile\"),\n  profileSet: (b: any) => req(\"/profile\", b, \"POST\"),\n  contacts: () => req(\"/contacts\"),\n  createContact: (b: any) => req(\"/contacts\", b, \"POST\"),\n  updateContact: (id: string, b: any) => req(`/contacts/${id}`, b, \"PUT\"),\n  deleteContact: (id: string) => req(`/contacts/${id}`, undefined, \"DELETE\"),\n  decisions: (contactId?: string) =>\n    req(contactId ? `/decisions?contact_id=${encodeURIComponent(contactId)}` : \"/decisions\"),\n  actionQueue: () => req(\"/actionQueue\"),\n  approveAction: (actionId: string, approve: boolean) =>\n    req(\"/actionQueue/approve\", { action_id: actionId, approve }, \"POST\"),\n  audit: () => req(\"/auditLog\"),\n  outcomes: (contactId?: string) =>\n    req(contactId ? `/outcomes?contact_id=${encodeURIComponent(contactId)}` : \"/outcomes\"),\n  createOutcome: (b: any) => req(\"/outcomes\", b, \"POST\"),\n  threads: (contactId?: string) =>\n    req(contactId ? `/threads?contact_id=${encodeURIComponent(contactId)}` : \"/threads\"),\n  threadMessages: (threadId: string) => req(`/threads/${encodeURIComponent(threadId)}/messages`),\n  dashboardSummary: () => req(\"/dashboard/summary\"),\n  weeklySummary: () => req(\"/dashboard/summary?range=week\")\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 429, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\n};\n\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nlet analytics: ReturnType<typeof getAnalytics> | null = null;\nif (typeof window !== \"undefined\") {\n  try { analytics = getAnalytics(app); } catch (e) { analytics = null; }\n}\n\nexport { app as firebaseApp, analytics };\nexport default app;\n"],"names":[],"mappings":";;;;;;;;AAIU;AAJV;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,WAAW;IACX,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,MAAM,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,kBAAkB,IAAA,6KAAM;AACtE,IAAI,YAAoD;AACxD,wCAAmC;IACjC,IAAI;QAAE,YAAY,IAAA,yLAAY,EAAC;IAAM,EAAE,OAAO,GAAG;QAAE,YAAY;IAAM;AACvE;;uCAGe"}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/firebaseClient.ts"],"sourcesContent":["import firebaseApp from \"./firebase\";\nimport { getFirestore } from \"firebase/firestore\";\n\nexport const db = getFirestore(firebaseApp as any);\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,IAAA,kLAAY,EAAC,6HAAW"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/realtime.ts"],"sourcesContent":["import { collection, doc, onSnapshot, orderBy, query } from \"firebase/firestore\";\nimport { db } from \"./firebaseClient\";\nimport { getAuth } from \"./auth\";\n\nexport function canUseRealtime() {\n  const auth = getAuth();\n  if (!auth || !auth.token) return false;\n  if (auth.token.startsWith(\"dev-\")) return false;\n  return true;\n}\n\nexport function subscribeCollection(\n  pathParts: string[],\n  orderField: string,\n  onData: (rows: any[]) => void\n) {\n  const auth = getAuth();\n  if (!auth || !canUseRealtime()) return null;\n  const ref = collection(db, ...pathParts);\n  const q = orderField ? query(ref, orderBy(orderField, \"desc\")) : ref;\n  return onSnapshot(q, snap => {\n    const rows = snap.docs.map(docSnap => ({ id: docSnap.id, ...docSnap.data() }));\n    onData(rows);\n  });\n}\n\nexport function subscribeDoc(\n  pathParts: string[],\n  onData: (data: any | null) => void\n) {\n  const auth = getAuth();\n  if (!auth || !canUseRealtime()) return null;\n  const ref = doc(db, ...pathParts);\n  return onSnapshot(ref, snap => {\n    onData(snap.exists() ? snap.data() : null);\n  });\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AACA;;;;AAEO,SAAS;IACd,MAAM,OAAO,IAAA,yHAAO;IACpB,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE,OAAO;IACjC,IAAI,KAAK,KAAK,CAAC,UAAU,CAAC,SAAS,OAAO;IAC1C,OAAO;AACT;AAEO,SAAS,oBACd,SAAmB,EACnB,UAAkB,EAClB,MAA6B;IAE7B,MAAM,OAAO,IAAA,yHAAO;IACpB,IAAI,CAAC,QAAQ,CAAC,kBAAkB,OAAO;IACvC,MAAM,MAAM,IAAA,gLAAU,EAAC,8HAAE,KAAK;IAC9B,MAAM,IAAI,aAAa,IAAA,2KAAK,EAAC,KAAK,IAAA,6KAAO,EAAC,YAAY,WAAW;IACjE,OAAO,IAAA,gLAAU,EAAC,GAAG,CAAA;QACnB,MAAM,OAAO,KAAK,IAAI,CAAC,GAAG,CAAC,CAAA,UAAW,CAAC;gBAAE,IAAI,QAAQ,EAAE;gBAAE,GAAG,QAAQ,IAAI,EAAE;YAAC,CAAC;QAC5E,OAAO;IACT;AACF;AAEO,SAAS,aACd,SAAmB,EACnB,MAAkC;IAElC,MAAM,OAAO,IAAA,yHAAO;IACpB,IAAI,CAAC,QAAQ,CAAC,kBAAkB,OAAO;IACvC,MAAM,MAAM,IAAA,yKAAG,EAAC,8HAAE,KAAK;IACvB,OAAO,IAAA,gLAAU,EAAC,KAAK,CAAA;QACrB,OAAO,KAAK,MAAM,KAAK,KAAK,IAAI,KAAK;IACvC;AACF"}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/components/LiveTicker.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { api } from \"../lib/api\";\nimport { subscribeCollection, subscribeDoc } from \"../lib/realtime\";\nimport { getAuth } from \"../lib/auth\";\n\nexport default function LiveTicker() {\n  const [summary, setSummary] = useState<any>(null);\n  const [pending, setPending] = useState(0);\n\n  useEffect(() => {\n    let interval: number | null = null;\n    const auth = getAuth();\n    const uid = auth?.uid;\n    if (!uid) return;\n\n    const today = new Date();\n    const day =\n      today.getFullYear().toString() +\n      String(today.getMonth() + 1).padStart(2, \"0\") +\n      String(today.getDate()).padStart(2, \"0\");\n\n    const unsubStats = subscribeDoc(\n      [\"users\", uid, \"stats\", `daily_${day}`],\n      data => setSummary({ day, stats: data || {} })\n    );\n    const unsubQueue = subscribeCollection(\n      [\"users\", uid, \"actionQueue\"],\n      \"created_ts\",\n      rows => setPending(rows.filter(r => r.status === \"needs_approval\").length)\n    );\n\n    if (!unsubStats || !unsubQueue) {\n      const poll = async () => {\n        try {\n          const data = await api.dashboardSummary();\n          setSummary(data || null);\n          const queue = await api.actionQueue();\n          setPending((queue || []).filter((r: any) => r.status === \"needs_approval\").length);\n        } catch {\n          // ignore poll errors\n        }\n      };\n      poll();\n      interval = window.setInterval(poll, 5000);\n    }\n\n    return () => {\n      if (typeof unsubStats === \"function\") unsubStats();\n      if (typeof unsubQueue === \"function\") unsubQueue();\n      if (interval) window.clearInterval(interval);\n    };\n  }, []);\n\n  const stats = summary?.stats || {};\n  return (\n    <div className=\"card tight\" style={{ margin: \"16px auto\", maxWidth: 1100 }}>\n      <div className=\"row\" style={{ alignItems: \"center\", justifyContent: \"space-between\" }}>\n        <div className=\"muted\">\n          AI handled <strong>{stats.chat_messages || 0}</strong> messages today\n        </div>\n        <div className=\"muted\">\n          <strong>{pending}</strong> pending approvals\n        </div>\n        <div className=\"muted\">\n          Saved <strong>{stats.minutes_saved || 0}</strong> minutes today\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;gCAAC;YACR,IAAI,WAA0B;YAC9B,MAAM,OAAO,IAAA,yHAAO;YACpB,MAAM,MAAM,MAAM;YAClB,IAAI,CAAC,KAAK;YAEV,MAAM,QAAQ,IAAI;YAClB,MAAM,MACJ,MAAM,WAAW,GAAG,QAAQ,KAC5B,OAAO,MAAM,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG,OACzC,OAAO,MAAM,OAAO,IAAI,QAAQ,CAAC,GAAG;YAEtC,MAAM,aAAa,IAAA,kIAAY,EAC7B;gBAAC;gBAAS;gBAAK;gBAAS,CAAC,MAAM,EAAE,KAAK;aAAC;mDACvC,CAAA,OAAQ,WAAW;wBAAE;wBAAK,OAAO,QAAQ,CAAC;oBAAE;;YAE9C,MAAM,aAAa,IAAA,yIAAmB,EACpC;gBAAC;gBAAS;gBAAK;aAAc,EAC7B;mDACA,CAAA,OAAQ,WAAW,KAAK,MAAM;2DAAC,CAAA,IAAK,EAAE,MAAM,KAAK;0DAAkB,MAAM;;YAG3E,IAAI,CAAC,cAAc,CAAC,YAAY;gBAC9B,MAAM;iDAAO;wBACX,IAAI;4BACF,MAAM,OAAO,MAAM,oHAAG,CAAC,gBAAgB;4BACvC,WAAW,QAAQ;4BACnB,MAAM,QAAQ,MAAM,oHAAG,CAAC,WAAW;4BACnC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM;6DAAC,CAAC,IAAW,EAAE,MAAM,KAAK;4DAAkB,MAAM;wBACnF,EAAE,OAAM;wBACN,qBAAqB;wBACvB;oBACF;;gBACA;gBACA,WAAW,OAAO,WAAW,CAAC,MAAM;YACtC;YAEA;wCAAO;oBACL,IAAI,OAAO,eAAe,YAAY;oBACtC,IAAI,OAAO,eAAe,YAAY;oBACtC,IAAI,UAAU,OAAO,aAAa,CAAC;gBACrC;;QACF;+BAAG,EAAE;IAEL,MAAM,QAAQ,SAAS,SAAS,CAAC;IACjC,qBACE,6LAAC;QAAI,WAAU;QAAa,OAAO;YAAE,QAAQ;YAAa,UAAU;QAAK;kBACvE,cAAA,6LAAC;YAAI,WAAU;YAAM,OAAO;gBAAE,YAAY;gBAAU,gBAAgB;YAAgB;;8BAClF,6LAAC;oBAAI,WAAU;;wBAAQ;sCACV,6LAAC;sCAAQ,MAAM,aAAa,IAAI;;;;;;wBAAW;;;;;;;8BAExD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAQ;;;;;;wBAAiB;;;;;;;8BAE5B,6LAAC;oBAAI,WAAU;;wBAAQ;sCACf,6LAAC;sCAAQ,MAAM,aAAa,IAAI;;;;;;wBAAW;;;;;;;;;;;;;;;;;;AAK3D;GAhEwB;KAAA"}}]
}