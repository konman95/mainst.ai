{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/firebaseServer.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n\nconst app = getApps().length ? getApp() : initializeApp(firebaseConfig);\n\nexport const db = getFirestore(app);\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,WAAW;IACX,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,MAAM,MAAM,IAAA,6KAAO,IAAG,MAAM,GAAG,IAAA,4KAAM,MAAK,IAAA,mLAAa,EAAC;AAEjD,MAAM,KAAK,IAAA,mLAAY,EAAC"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/firebaseAuth.ts"],"sourcesContent":["type ResolveResult = {\n  uid: string | null;\n};\n\nasync function lookupUid(token: string, apiKey: string) {\n  const res = await fetch(\n    `https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=${apiKey}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ idToken: token })\n    }\n  );\n\n  if (!res.ok) return null;\n  const data = await res.json();\n  return data?.users?.[0]?.localId || null;\n}\n\nexport async function resolveUid(authHeader: string | null): Promise<ResolveResult> {\n  if (!authHeader?.startsWith(\"Bearer \")) return { uid: null };\n  const token = authHeader.slice(7);\n\n  if (token.startsWith(\"dev-\")) {\n    return { uid: \"dev\" };\n  }\n\n  const apiKey = process.env.NEXT_PUBLIC_FIREBASE_API_KEY;\n  if (!apiKey) return { uid: null };\n\n  const uid = await lookupUid(token, apiKey);\n  return { uid };\n}\n"],"names":[],"mappings":";;;;AAIA,eAAe,UAAU,KAAa,EAAE,MAAc;IACpD,MAAM,MAAM,MAAM,MAChB,CAAC,8DAA8D,EAAE,QAAQ,EACzE;QACE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,SAAS;QAAM;IACxC;IAGF,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;IACpB,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,MAAM,OAAO,CAAC,EAAE,EAAE,WAAW;AACtC;AAEO,eAAe,WAAW,UAAyB;IACxD,IAAI,CAAC,YAAY,WAAW,YAAY,OAAO;QAAE,KAAK;IAAK;IAC3D,MAAM,QAAQ,WAAW,KAAK,CAAC;IAE/B,IAAI,MAAM,UAAU,CAAC,SAAS;QAC5B,OAAO;YAAE,KAAK;QAAM;IACtB;IAEA,MAAM;IACN;;IAEA,MAAM,MAAM,MAAM,UAAU,OAAO;IACnC,OAAO;QAAE;IAAI;AACf"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/devStore.ts"],"sourcesContent":["type BusinessProfile = {\n  name: string;\n  services: string;\n  hours: string;\n  serviceArea: string;\n  pricingNotes: string;\n  policies: string;\n  tone: string;\n  updatedAt: number;\n};\n\ntype Contact = {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  notes: string;\n  tags: string[];\n  status: string;\n  lastContact: number | null;\n  createdAt: number;\n  updatedAt: number;\n};\n\ntype Message = {\n  role: \"user\" | \"assistant\";\n  content: string;\n  createdAt: number;\n};\n\ntype Conversation = {\n  id: string;\n  uid: string;\n  messages: Message[];\n  updatedAt: number;\n};\n\ntype Action = {\n  id: string;\n  uid: string;\n  status: \"queued\" | \"sent\" | \"approved\" | \"denied\";\n  action: string;\n  confidence: number;\n  restricted: boolean;\n  response: string;\n  reason: string;\n  message: string;\n  createdAt: number;\n};\n\ntype AuditEvent = {\n  id: string;\n  uid: string;\n  type: \"chat\" | \"owner-cover\";\n  message: string;\n  response: string;\n  intent?: string;\n  confidence?: number;\n  decision?: string;\n  createdAt: number;\n};\n\ntype OwnerCoverSettings = {\n  mode: \"off\" | \"monitor\" | \"auto\";\n  confidenceThreshold: number;\n  restrictedTopics: string[];\n  quietHoursStart: string;\n  quietHoursEnd: string;\n  quietHoursEnabled: boolean;\n};\n\nconst devProfile: BusinessProfile = {\n  name: \"Main St AI\",\n  services: \"Lead response, scheduling, and front-desk coverage\",\n  hours: \"Mon–Fri, 9am–6pm\",\n  serviceArea: \"Local service area\",\n  pricingNotes: \"Pricing varies by service tier; ask clarifying questions.\",\n  policies: \"No legal or refund decisions without owner approval.\",\n  tone: \"Calm, professional, concise.\",\n  updatedAt: Date.now()\n};\n\nlet contacts: Contact[] = [];\nlet conversations: Conversation[] = [];\nlet actions: Action[] = [];\nlet audit: AuditEvent[] = [];\nlet ownerCoverSettings: OwnerCoverSettings = {\n  mode: \"monitor\",\n  confidenceThreshold: 0.85,\n  restrictedTopics: [\"billing\", \"complaints\", \"legal\"],\n  quietHoursStart: \"20:00\",\n  quietHoursEnd: \"07:00\",\n  quietHoursEnabled: false\n};\n\nfunction makeId() {\n  return `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n}\n\nexport function getProfile() {\n  return devProfile;\n}\n\nexport function setProfile(next: Partial<BusinessProfile>) {\n  Object.assign(devProfile, next, { updatedAt: Date.now() });\n  return devProfile;\n}\n\nexport function listContacts() {\n  return contacts;\n}\n\nexport function addContact(input: Partial<Contact>) {\n  const now = Date.now();\n  const contact: Contact = {\n    id: makeId(),\n    name: String(input.name || \"\"),\n    email: String(input.email || \"\"),\n    phone: String(input.phone || \"\"),\n    notes: String(input.notes || \"\"),\n    tags: Array.isArray(input.tags) ? input.tags : [],\n    status: String(input.status || \"new\"),\n    lastContact: null,\n    createdAt: now,\n    updatedAt: now\n  };\n  contacts.unshift(contact);\n  return contact;\n}\n\nexport function updateContact(id: string, input: Partial<Contact>) {\n  const idx = contacts.findIndex(c => c.id === id);\n  if (idx === -1) return null;\n  contacts[idx] = {\n    ...contacts[idx],\n    ...input,\n    updatedAt: Date.now()\n  };\n  return contacts[idx];\n}\n\nexport function removeContact(id: string) {\n  const before = contacts.length;\n  contacts = contacts.filter(c => c.id !== id);\n  return contacts.length < before;\n}\n\nexport function getConversation(id: string) {\n  let convo = conversations.find(c => c.id === id);\n  if (!convo) {\n    convo = { id, uid: \"dev\", messages: [], updatedAt: Date.now() };\n    conversations.push(convo);\n  }\n  return convo;\n}\n\nexport function addMessage(conversationId: string, role: Message[\"role\"], content: string) {\n  const convo = getConversation(conversationId);\n  const message = { role, content, createdAt: Date.now() };\n  convo.messages.push(message);\n  convo.updatedAt = Date.now();\n  return message;\n}\n\nexport function listMessages(conversationId: string) {\n  return getConversation(conversationId).messages;\n}\n\nexport function addAction(entry: Omit<Action, \"id\" | \"createdAt\" | \"status\"> & { status?: Action[\"status\"] }) {\n  const action: Action = {\n    id: makeId(),\n    uid: \"dev\",\n    status: entry.status || \"queued\",\n    action: entry.action,\n    confidence: entry.confidence,\n    restricted: entry.restricted,\n    response: entry.response,\n    reason: entry.reason,\n    message: entry.message,\n    createdAt: Date.now()\n  };\n  actions.unshift(action);\n  return action;\n}\n\nexport function listActions() {\n  return actions;\n}\n\nexport function updateAction(id: string, status: Action[\"status\"]) {\n  const idx = actions.findIndex(a => a.id === id);\n  if (idx === -1) return null;\n  actions[idx] = { ...actions[idx], status };\n  return actions[idx];\n}\n\nexport function addAudit(event: Omit<AuditEvent, \"id\" | \"createdAt\">) {\n  const entry: AuditEvent = { ...event, id: makeId(), createdAt: Date.now() };\n  audit.unshift(entry);\n  return entry;\n}\n\nexport function listAudit() {\n  return audit;\n}\n\nexport function getOwnerCoverSettings() {\n  return ownerCoverSettings;\n}\n\nexport function setOwnerCoverSettings(next: Partial<OwnerCoverSettings>) {\n  ownerCoverSettings = { ...ownerCoverSettings, ...next };\n  return ownerCoverSettings;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 390, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/app/api/chat/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport {\n  addDoc,\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  orderBy,\n  query,\n  setDoc,\n  limit\n} from \"firebase/firestore\";\nimport { db } from \"../../../lib/firebaseServer\";\nimport { resolveUid } from \"../../../lib/firebaseAuth\";\nimport {\n  addAudit,\n  addMessage,\n  getProfile,\n  listMessages\n} from \"../../../lib/devStore\";\n\nfunction buildPrompt(params: {\n  message: string;\n  profile?: any;\n  history?: { role: string; content: string }[];\n  contact?: any;\n}) {\n  const profile = params.profile || {};\n  const lines = [\n    \"You are Main St AI, a calm, professional front-desk assistant for a small business.\",\n    \"You respond clearly, avoid hype, and keep answers concise and helpful.\",\n    \"If the user asks about pricing, ask a clarifying question instead of inventing numbers.\",\n    \"Never claim actions you did not take.\",\n    \"\",\n    `Business name: ${profile.name || \"Main St AI client\"}`,\n    `Services: ${profile.services || \"Not provided\"}`,\n    `Hours: ${profile.hours || \"Not provided\"}`,\n    `Service area: ${profile.serviceArea || \"Not provided\"}`,\n    `Pricing notes: ${profile.pricingNotes || \"Not provided\"}`,\n    `Policies: ${profile.policies || \"Not provided\"}`,\n    `Tone guidance: ${profile.tone || \"Calm, professional, concise.\"}`\n  ];\n\n  if (params.contact) {\n    lines.push(\n      \"\",\n      `Contact name: ${params.contact.name || \"Unknown\"}`,\n      `Contact email: ${params.contact.email || \"Unknown\"}`,\n      `Contact phone: ${params.contact.phone || \"Unknown\"}`,\n      `Contact notes: ${params.contact.notes || \"None\"}`,\n      `Lead status: ${params.contact.status || \"Unknown\"}`\n    );\n  }\n\n  if (params.history && params.history.length) {\n    lines.push(\"\", \"Conversation history:\");\n    params.history.forEach(entry => {\n      lines.push(`${entry.role.toUpperCase()}: ${entry.content}`);\n    });\n  }\n\n  lines.push(\"\", `Customer message: ${params.message}`, \"Assistant response:\");\n  return lines.join(\"\\n\");\n}\n\nexport async function POST(request: Request) {\n  const { uid } = await resolveUid(request.headers.get(\"authorization\"));\n  if (!uid) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n\n  const body = await request.json().catch(() => ({}));\n  const message = String(body?.message || \"\").trim();\n  const conversationId = String(body?.conversationId || `${uid}-default`);\n\n  if (!message) {\n    return NextResponse.json({ error: \"Message is required.\" }, { status: 400 });\n  }\n\n  const profile =\n    uid === \"dev\"\n      ? getProfile()\n      : await (async () => {\n          const ref = doc(db, \"businessProfiles\", uid);\n          const snap = await getDoc(ref);\n          if (!snap.exists()) {\n            await setDoc(ref, {\n              name: \"Main St AI client\",\n              services: \"\",\n              hours: \"\",\n              serviceArea: \"\",\n              pricingNotes: \"\",\n              policies: \"\",\n              tone: \"Calm, professional, concise.\",\n              updatedAt: Date.now()\n            });\n            return {\n              name: \"Main St AI client\",\n              services: \"\",\n              hours: \"\",\n              serviceArea: \"\",\n              pricingNotes: \"\",\n              policies: \"\",\n              tone: \"Calm, professional, concise.\"\n            };\n          }\n          return snap.data();\n        })();\n\n  const history =\n    uid === \"dev\"\n      ? listMessages(conversationId).slice(-6).map(m => ({ role: m.role, content: m.content }))\n      : await (async () => {\n          const convoRef = doc(db, \"conversations\", conversationId);\n          await setDoc(\n            convoRef,\n            { uid, updatedAt: Date.now(), channel: \"web\" },\n            { merge: true }\n          );\n          const messagesRef = collection(convoRef, \"messages\");\n          const q = query(messagesRef, orderBy(\"createdAt\", \"desc\"), limit(6));\n          const snap = await getDocs(q);\n          return snap.docs\n            .map(docSnap => ({\n              role: docSnap.data().role,\n              content: docSnap.data().content,\n              createdAt: docSnap.data().createdAt\n            }))\n            .sort((a, b) => a.createdAt - b.createdAt);\n        })();\n\n  const token = process.env.HF_TOKEN;\n  const model = process.env.HF_MODEL || \"mistralai/Mistral-7B-Instruct-v0.2\";\n\n  if (!token) {\n    const fallback = \"Thanks for reaching out. How can I help you today?\";\n    if (uid === \"dev\") {\n      addMessage(conversationId, \"user\", message);\n      addMessage(conversationId, \"assistant\", fallback);\n      addAudit({\n        uid,\n        type: \"chat\",\n        message,\n        response: fallback,\n        decision: \"sent\"\n      });\n    }\n    return NextResponse.json({\n      reply: fallback,\n      model: \"mock\",\n      warning: \"HF_TOKEN is not configured.\"\n    });\n  }\n\n  const prompt = buildPrompt({ message, profile, history });\n\n  const response = await fetch(`https://api-inference.huggingface.co/models/${model}`, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      inputs: prompt,\n      parameters: {\n        max_new_tokens: 180,\n        temperature: 0.3,\n        return_full_text: false\n      }\n    })\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text().catch(() => \"Hugging Face error\");\n    return NextResponse.json({ error: errorText }, { status: 502 });\n  }\n\n  const data = await response.json();\n  const reply =\n    Array.isArray(data) && data[0]?.generated_text\n      ? String(data[0].generated_text).trim()\n      : typeof data?.generated_text === \"string\"\n        ? data.generated_text.trim()\n        : \"\";\n\n  const finalReply = reply || \"Thanks for reaching out. How can I help you today?\";\n\n  if (uid === \"dev\") {\n    addMessage(conversationId, \"user\", message);\n    addMessage(conversationId, \"assistant\", finalReply);\n    addAudit({\n      uid,\n      type: \"chat\",\n      message,\n      response: finalReply,\n      decision: \"sent\"\n    });\n  } else {\n    const convoRef = doc(db, \"conversations\", conversationId);\n    await setDoc(convoRef, { uid, updatedAt: Date.now(), channel: \"web\" }, { merge: true });\n    const messagesRef = collection(convoRef, \"messages\");\n    await addDoc(messagesRef, {\n      role: \"user\",\n      content: message,\n      createdAt: Date.now()\n    });\n    await addDoc(messagesRef, {\n      role: \"assistant\",\n      content: finalReply,\n      createdAt: Date.now()\n    });\n    await addDoc(collection(db, \"auditEvents\"), {\n      uid,\n      type: \"chat\",\n      message,\n      response: finalReply,\n      decision: \"sent\",\n      createdAt: Date.now()\n    });\n  }\n\n  return NextResponse.json({\n    reply: finalReply,\n    model,\n    conversationId\n  });\n}\n"],"names":[],"mappings":"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"}}]
}