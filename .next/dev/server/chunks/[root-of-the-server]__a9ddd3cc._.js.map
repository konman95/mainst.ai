{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/firebaseServer.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n\nconst app = getApps().length ? getApp() : initializeApp(firebaseConfig);\n\nexport const db = getFirestore(app);\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,WAAW;IACX,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,MAAM,MAAM,IAAA,6KAAO,IAAG,MAAM,GAAG,IAAA,4KAAM,MAAK,IAAA,mLAAa,EAAC;AAEjD,MAAM,KAAK,IAAA,mLAAY,EAAC"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/lib/firebaseAuth.ts"],"sourcesContent":["type ResolveResult = {\n  uid: string | null;\n};\n\nasync function lookupUid(token: string, apiKey: string) {\n  const res = await fetch(\n    `https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=${apiKey}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ idToken: token })\n    }\n  );\n\n  if (!res.ok) return null;\n  const data = await res.json();\n  return data?.users?.[0]?.localId || null;\n}\n\nexport async function resolveUid(authHeader: string | null): Promise<ResolveResult> {\n  if (!authHeader?.startsWith(\"Bearer \")) return { uid: null };\n  const token = authHeader.slice(7);\n\n  if (token.startsWith(\"dev-\")) {\n    return { uid: \"dev\" };\n  }\n\n  const apiKey = process.env.NEXT_PUBLIC_FIREBASE_API_KEY;\n  if (!apiKey) return { uid: null };\n\n  const uid = await lookupUid(token, apiKey);\n  return { uid };\n}\n"],"names":[],"mappings":";;;;AAIA,eAAe,UAAU,KAAa,EAAE,MAAc;IACpD,MAAM,MAAM,MAAM,MAChB,CAAC,8DAA8D,EAAE,QAAQ,EACzE;QACE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,SAAS;QAAM;IACxC;IAGF,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;IACpB,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,MAAM,OAAO,CAAC,EAAE,EAAE,WAAW;AACtC;AAEO,eAAe,WAAW,UAAyB;IACxD,IAAI,CAAC,YAAY,WAAW,YAAY,OAAO;QAAE,KAAK;IAAK;IAC3D,MAAM,QAAQ,WAAW,KAAK,CAAC;IAE/B,IAAI,MAAM,UAAU,CAAC,SAAS;QAC5B,OAAO;YAAE,KAAK;QAAM;IACtB;IAEA,MAAM;IACN;;IAEA,MAAM,MAAM,MAAM,UAAU,OAAO;IACnC,OAAO;QAAE;IAAI;AACf"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/app/api/contacts/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { addDoc, collection, getDocs, query, where } from \"firebase/firestore\";\nimport { db } from \"../../../lib/firebaseServer\";\nimport { resolveUid } from \"../../../lib/firebaseAuth\";\n\nexport async function GET(request: Request) {\n  const { uid } = await resolveUid(request.headers.get(\"authorization\"));\n  if (!uid) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n\n  const q = query(collection(db, \"contacts\"), where(\"uid\", \"==\", uid));\n  const snap = await getDocs(q);\n  const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  return NextResponse.json(data);\n}\n\nexport async function POST(request: Request) {\n  const { uid } = await resolveUid(request.headers.get(\"authorization\"));\n  if (!uid) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n\n  const body = await request.json().catch(() => ({}));\n  const name = String(body?.name || \"\").trim();\n  const email = String(body?.email || \"\").trim();\n\n  const docRef = await addDoc(collection(db, \"contacts\"), {\n    uid,\n    name,\n    email,\n    createdAt: Date.now(),\n    updatedAt: Date.now()\n  });\n\n  return NextResponse.json({ id: docRef.id, uid, name, email }, { status: 201 });\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,IAAA,mIAAU,EAAC,QAAQ,OAAO,CAAC,GAAG,CAAC;IACrD,IAAI,CAAC,KAAK,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAe,GAAG;QAAE,QAAQ;IAAI;IAE5E,MAAM,IAAI,IAAA,4KAAK,EAAC,IAAA,iLAAU,EAAC,6HAAE,EAAE,aAAa,IAAA,4KAAK,EAAC,OAAO,MAAM;IAC/D,MAAM,OAAO,MAAM,IAAA,8KAAO,EAAC;IAC3B,MAAM,OAAO,KAAK,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;YAAE,IAAI,IAAI,EAAE;YAAE,GAAG,IAAI,IAAI,EAAE;QAAC,CAAC;IAChE,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,IAAA,mIAAU,EAAC,QAAQ,OAAO,CAAC,GAAG,CAAC;IACrD,IAAI,CAAC,KAAK,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAe,GAAG;QAAE,QAAQ;IAAI;IAE5E,MAAM,OAAO,MAAM,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IACjD,MAAM,OAAO,OAAO,MAAM,QAAQ,IAAI,IAAI;IAC1C,MAAM,QAAQ,OAAO,MAAM,SAAS,IAAI,IAAI;IAE5C,MAAM,SAAS,MAAM,IAAA,6KAAM,EAAC,IAAA,iLAAU,EAAC,6HAAE,EAAE,aAAa;QACtD;QACA;QACA;QACA,WAAW,KAAK,GAAG;QACnB,WAAW,KAAK,GAAG;IACrB;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,IAAI,OAAO,EAAE;QAAE;QAAK;QAAM;IAAM,GAAG;QAAE,QAAQ;IAAI;AAC9E"}}]
}