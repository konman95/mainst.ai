{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/app/contacts/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { api } from \"../../lib/api\";\n\nexport default function Contacts() {\n  const [contacts,setContacts]=useState<any[] | null>(null);\n  const [error,setError]=useState<string | null>(null);\n  const [editing,setEditing]=useState<any | null>(null);\n  const [name,setName]=useState(\"\");\n  const [email,setEmail]=useState(\"\");\n  const [phone,setPhone]=useState(\"\");\n  const [notes,setNotes]=useState(\"\");\n  const [tags,setTags]=useState(\"\");\n  const [status,setStatus]=useState(\"new\");\n\n  async function load() {\n    setError(null);\n    try {\n      const c = await api.contacts();\n      setContacts(c || []);\n    } catch (e: any) {\n      setError(e?.message || String(e));\n      setContacts(null);\n    }\n  }\n\n  useEffect(()=>{\n    let active = true;\n    async function refresh() {\n      if (!active) return;\n      await load();\n    }\n    load();\n    const interval = setInterval(refresh, 5000);\n    return () => {\n      active = false;\n      clearInterval(interval);\n    };\n  },[]);\n\n  function startNew() {\n    setEditing({});\n    setName(\"\");\n    setEmail(\"\");\n    setPhone(\"\");\n    setNotes(\"\");\n    setTags(\"\");\n    setStatus(\"new\");\n  }\n\n  function startEdit(c:any) {\n    setEditing(c);\n    setName(c.name || \"\");\n    setEmail(c.email || \"\");\n    setPhone(c.phone || \"\");\n    setNotes(c.notes || \"\");\n    setTags(Array.isArray(c.tags) ? c.tags.join(\", \") : \"\");\n    setStatus(c.status || \"new\");\n  }\n\n  async function save() {\n    try {\n      if (editing?.id) {\n        await api.updateContact(editing.id, {\n          name,\n          email,\n          phone,\n          notes,\n          tags: tags.split(\",\").map(t => t.trim()).filter(Boolean),\n          status\n        });\n      } else {\n        await api.createContact({\n          name,\n          email,\n          phone,\n          notes,\n          tags: tags.split(\",\").map(t => t.trim()).filter(Boolean),\n          status\n        });\n      }\n      setEditing(null);\n      await load();\n    } catch (e:any) {\n      setError(e?.message || String(e));\n    }\n  }\n\n  async function remove(id:string) {\n    try {\n      await api.deleteContact(id);\n      await load();\n    } catch (e:any) {\n      setError(e?.message || String(e));\n    }\n  }\n\n  return (\n    <div className=\"stagger\">\n      <div className=\"row\" style={{ alignItems: \"center\", justifyContent: \"space-between\" }}>\n        <div>\n          <span className=\"pill\">Customer Book</span>\n          <h2 className=\"section-title\">Contacts</h2>\n          <p className=\"muted\">Lead status, notes, and last interaction â€” built for small teams.</p>\n        </div>\n        <div className=\"row\">\n          <button className=\"btn ghost\" onClick={load}>Reload</button>\n          <button className=\"btn primary\" onClick={startNew}>New Contact</button>\n        </div>\n      </div>\n\n      {error && <div className=\"muted\">Error: {error}</div>}\n\n      {editing && (\n        <div className=\"card\">\n          <h3 className=\"section-title\">{editing?.id ? \"Edit Contact\" : \"New Contact\"}</h3>\n          <div className=\"feature-grid\">\n            <input className=\"input\" placeholder=\"Name\" value={name} onChange={e=>setName(e.target.value)} />\n            <input className=\"input\" placeholder=\"Email\" value={email} onChange={e=>setEmail(e.target.value)} />\n            <input className=\"input\" placeholder=\"Phone\" value={phone} onChange={e=>setPhone(e.target.value)} />\n            <select className=\"select\" value={status} onChange={e=>setStatus(e.target.value)}>\n              <option value=\"new\">New lead</option>\n              <option value=\"warm\">Warm lead</option>\n              <option value=\"hot\">Hot lead</option>\n              <option value=\"customer\">Customer</option>\n              <option value=\"inactive\">Inactive</option>\n            </select>\n          </div>\n          <textarea\n            className=\"textarea\"\n            placeholder=\"Notes\"\n            value={notes}\n            onChange={e=>setNotes(e.target.value)}\n            style={{ marginTop: 12 }}\n          />\n          <input\n            className=\"input\"\n            placeholder=\"Tags (comma separated)\"\n            value={tags}\n            onChange={e=>setTags(e.target.value)}\n            style={{ marginTop: 12 }}\n          />\n          <div className=\"row\" style={{marginTop:8}}>\n            <button className=\"btn primary\" onClick={save}>Save</button>\n            <button className=\"btn ghost\" onClick={()=>setEditing(null)}>Cancel</button>\n          </div>\n        </div>\n      )}\n\n      {!contacts ? (\n        <div className=\"card\">\n          <div className=\"muted\">No contacts loaded yet.</div>\n        </div>\n      ) : (\n        <div className=\"feature-grid\">\n          {contacts.length === 0 && (\n            <div className=\"card\">\n              <strong>No contacts found</strong>\n              <div className=\"muted\">Create your first contact to get started.</div>\n            </div>\n          )}\n          {contacts.map((c,i)=> (\n            <div className=\"feature-card\" key={c.id || i}>\n              <strong>{c.name || \"Unnamed contact\"}</strong>\n              <div className=\"muted\">{c.email || \"No email on file\"}</div>\n              <div className=\"muted\">{c.phone || \"No phone on file\"}</div>\n              <div className=\"row\" style={{ marginTop: 8 }}>\n                <span className=\"badge\">{c.status || \"new\"}</span>\n                {Array.isArray(c.tags) && c.tags.length > 0 && (\n                  <span className=\"badge\">{c.tags.slice(0, 3).join(\", \")}</span>\n                )}\n              </div>\n              {c.notes && <div className=\"muted\" style={{ marginTop: 8 }}>{c.notes}</div>}\n              {c.lastContact && (\n                <div className=\"muted\" style={{ marginTop: 8 }}>\n                  Last contact: {new Date(c.lastContact).toLocaleString()}\n                </div>\n              )}\n              <div className=\"row\" style={{marginTop:10}}>\n                <button className=\"btn ghost\" onClick={()=>startEdit(c)}>Edit</button>\n                <button className=\"btn ghost\" onClick={()=>remove(c.id)}>Delete</button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}