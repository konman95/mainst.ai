{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/components/FirebaseAuth.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport {\n  getAuth as firebaseGetAuth,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut as firebaseSignOut,\n  GoogleAuthProvider,\n  signInWithPopup,\n  sendPasswordResetEmail,\n} from \"firebase/auth\";\nimport firebaseApp from \"../lib/firebase\";\nimport { setAuth, clearAuth } from \"../lib/auth\";\n\nexport default function FirebaseAuth() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const auth = firebaseGetAuth(firebaseApp as any);\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, async (u) => {\n      if (u) {\n        setUser(u);\n        try {\n          const token = await u.getIdToken();\n          setAuth({ uid: u.uid, token });\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        setUser(null);\n        clearAuth();\n      }\n    });\n    return () => unsub();\n  }, [auth]);\n\n  async function handleSignIn() {\n    setLoading(true);\n    setError(null);\n    try {\n      const cred = await signInWithEmailAndPassword(auth, email, password);\n      const token = await cred.user.getIdToken();\n      setAuth({ uid: cred.user.uid, token });\n      setUser(cred.user);\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleGoogleSignIn() {\n    setLoading(true);\n    setError(null);\n    try {\n      const provider = new GoogleAuthProvider();\n      const cred = await signInWithPopup(auth, provider);\n      const token = await cred.user.getIdToken();\n      setAuth({ uid: cred.user.uid, token });\n      setUser(cred.user);\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handlePasswordReset() {\n    if (!email) return setError(\"Enter email to reset password\");\n    setLoading(true);\n    setError(null);\n    try {\n      await sendPasswordResetEmail(auth, email);\n      setError(\"Password reset email sent.\");\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleSignOut() {\n    await firebaseSignOut(auth);\n    clearAuth();\n    setUser(null);\n  }\n\n  return (\n    <div className=\"stagger\">\n      <h3 className=\"section-title\">Sign in</h3>\n      {user ? (\n        <div>\n          <div className=\"muted\">Signed in as {user.email || user.uid}</div>\n          <div style={{ marginTop: 12 }}>\n            <button className=\"btn\" onClick={handleSignOut}>Sign out</button>\n          </div>\n        </div>\n      ) : (\n        <div>\n          <input className=\"input\" placeholder=\"Email\" value={email} onChange={e=>setEmail(e.target.value)} />\n          <input className=\"input\" placeholder=\"Password\" type=\"password\" value={password} onChange={e=>setPassword(e.target.value)} />\n          <div className=\"row\">\n            <button className=\"btn primary\" onClick={handleSignIn} disabled={loading}>{loading?\"Signing in...\":\"Sign in\"}</button>\n            <button className=\"btn ghost\" onClick={handleGoogleSignIn} disabled={loading}>Sign in with Google</button>\n          </div>\n          <div style={{marginTop:8}}>\n            <button className=\"btn ghost\" onClick={handlePasswordReset}>Send password reset</button>\n          </div>\n          {error && <div className=\"muted\">{error}</div>}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///Users/konnerwest/mainst1/mainstai/app/login/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport FirebaseAuth from \"../../components/FirebaseAuth\";\nimport { setAuth } from \"../../lib/auth\";\n\nexport default function Login() {\n  const [uid,setUid]=useState(\"123\");\n  const [token,setToken]=useState(\"dev-123\");\n  const [showDev, setShowDev] = useState(process.env.NEXT_PUBLIC_SHOW_DEVTOOLS === \"true\");\n  return (\n    <div className=\"hero\">\n      <div className=\"card fade-up\">\n        <span className=\"pill\">Secure Sign In</span>\n        <h2 className=\"section-title\">Welcome back</h2>\n        <p className=\"muted\">Sign in to keep coverage, chat history, and owner handoffs flowing.</p>\n        <div style={{ marginTop: 16 }}>\n          <FirebaseAuth />\n        </div>\n        <div className=\"row\" style={{ marginTop: 16 }}>\n          <button className=\"btn ghost\" onClick={() => setShowDev(v => !v)}>\n            {showDev ? \"Hide developer access\" : \"Developer access\"}\n          </button>\n        </div>\n      </div>\n\n      {showDev && (\n        <div className=\"card fade-up\">\n          <span className=\"pill\">Developer Access</span>\n          <h3 className=\"section-title\">Local login</h3>\n          <p className=\"muted\">\n            For local development or demo access without Firebase.\n          </p>\n          <div style={{ marginTop: 12 }}>\n            <input className=\"input\" value={uid} onChange={e=>setUid(e.target.value)} />\n            <input className=\"input\" value={token} onChange={e=>setToken(e.target.value)} />\n          </div>\n          <div className=\"hero-actions\">\n            <button className=\"btn primary\" onClick={()=>{\n              setAuth({uid,token});\n              location.href=\"/dashboard\";\n            }}>Sign in</button>\n            <a className=\"btn ghost\" href=\"/\">Back to Home</a>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,CAAC,KAAI,OAAO,GAAC,IAAA,iNAAQ,EAAC;IAC5B,MAAM,CAAC,OAAM,SAAS,GAAC,IAAA,iNAAQ,EAAC;IAChC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,QAAQ,GAAG,CAAC,yBAAyB,KAAK;IACjF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAO;;;;;;kCACvB,8OAAC;wBAAG,WAAU;kCAAgB;;;;;;kCAC9B,8OAAC;wBAAE,WAAU;kCAAQ;;;;;;kCACrB,8OAAC;wBAAI,OAAO;4BAAE,WAAW;wBAAG;kCAC1B,cAAA,8OAAC,sIAAY;;;;;;;;;;kCAEf,8OAAC;wBAAI,WAAU;wBAAM,OAAO;4BAAE,WAAW;wBAAG;kCAC1C,cAAA,8OAAC;4BAAO,WAAU;4BAAY,SAAS,IAAM,WAAW,CAAA,IAAK,CAAC;sCAC3D,UAAU,0BAA0B;;;;;;;;;;;;;;;;;YAK1C,yBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAO;;;;;;kCACvB,8OAAC;wBAAG,WAAU;kCAAgB;;;;;;kCAC9B,8OAAC;wBAAE,WAAU;kCAAQ;;;;;;kCAGrB,8OAAC;wBAAI,OAAO;4BAAE,WAAW;wBAAG;;0CAC1B,8OAAC;gCAAM,WAAU;gCAAQ,OAAO;gCAAK,UAAU,CAAA,IAAG,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;0CACvE,8OAAC;gCAAM,WAAU;gCAAQ,OAAO;gCAAO,UAAU,CAAA,IAAG,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAE7E,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAO,WAAU;gCAAc,SAAS;oCACvC,IAAA,sHAAO,EAAC;wCAAC;wCAAI;oCAAK;oCAClB,SAAS,IAAI,GAAC;gCAChB;0CAAG;;;;;;0CACH,8OAAC;gCAAE,WAAU;gCAAY,MAAK;0CAAI;;;;;;;;;;;;;;;;;;;;;;;;AAM9C"}}]
}